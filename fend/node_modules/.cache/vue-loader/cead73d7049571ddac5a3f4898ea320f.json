{"remainingRequest":"/var/www/html/vue-project/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/var/www/html/vue-project/src/components/posts/Add.vue?vue&type=style&index=0&id=985e5436&scoped=true&lang=css","dependencies":[{"path":"/var/www/html/vue-project/src/components/posts/Add.vue","mtime":1623600810000},{"path":"/var/www/html/vue-project/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/vue-project/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/var/www/html/vue-project/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/var/www/html/vue-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/vue-project/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5wcmV2aWV3IHsKICBvdmVyZmxvdzogaGlkZGVuOwogIHdpZHRoOiAyMDBweDsgCiAgaGVpZ2h0OiAyMDBweDsKfQo="},{"version":3,"sources":["/var/www/html/vue-project/src/components/posts/Add.vue"],"names":[],"mappings":";AA+OA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf","file":"/var/www/html/vue-project/src/components/posts/Add.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"home\" ref=\"userref\">\n       <h4> {{title}}  </h4>\n        <div class=\"row\">\n                      <div class=\"col-md-8\">\n                            <div class=\"form-group \">\n                                    <div class=\"col-sm-12\">\n                                        <label for=\"\" class=\"form-label\"> Title: </label>\n                                        <input type=\"text\" class=\"form-control\" v-model=\"data.title\" />\n                                    </div>\n                            </div>\n                            <div class=\"form-group \">\n                                    <div class=\"col-sm-12\">\n                                        <label for=\"\" class=\"form-label\"> Content </label>\n                                        <textarea type=\"text\"  rows=\"5\" class=\"form-control\" v-model=\"data.content\"></textarea>\n                                    </div>\n                            </div>\n\n                             <div class=\"form-group \">\n                                    <div class=\"col-sm-12\">\n                                        <label for=\"\" class=\"form-label\"> Categories </label>\n                                        <textarea type=\"text\"  rows=\"5\" class=\"form-control\" v-model=\"data.content\"></textarea>\n                                    </div>\n                            </div>\n\n                      </div>\n                      <div class=\"col-md-4\">\n                             <div>\n                                    <div class=\"modal fade\" id=\"modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modalLabel\" aria-hidden=\"true\">\n                                    <div class=\"modal-dialog modal-lg\" role=\"document\">\n                                    <div class=\"modal-content\">\n                                    <div class=\"modal-header\">\n                                    <h5 class=\"modal-title\" id=\"modalLabel\">Laravel Cropper Js - Crop Image Before Upload - Tutsmake.com</h5>\n                                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                    <span aria-hidden=\"true\">Ã—</span>\n                                    </button>\n                                    </div>\n                                    <div class=\"modal-body\">\n                                    <div class=\"img-container\">\n                                    <div class=\"row\">\n                                    <div class=\"col-md-8\">\n                                    <img id=\"image\" src=\"https://avatars0.githubusercontent.com/u/3456749\"/>\n                                    </div>\n                                    <div class=\"col-md-4\">\n                                    <div class=\"preview\"></div>\n                                    </div>\n                                    </div>\n                                    </div>\n                                    </div>\n                                    <div class=\"modal-footer\">\n                                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n                                    <button type=\"button\" class=\"btn btn-primary\" id=\"crop\">Crop</button>\n                                    </div>\n                                    </div>\n                                    </div>\n                                    </div>\n                                             \n                                </div>\n\n                            <div class=\"form-group \">\n                                <form action=\"#\" enctype=\"multipart/form-data\">\n                                <h4> 50x50</h4>\n                                <div>\n                                 <div> <img class=\"image_100_100\" src=\"\" width=\"100\" height=\"100\" /> </div> \n                                 <input type=\"hidden\" v-model=\"image_100_100\" />   \n                                 <input type=\"file\" id=\"image_100_100\"  class=\"image btn btn-info\">\n                                </div>\n                             \n                                <h4> 200x200</h4>\n                                 <div>\n                                <div> \n                                 <img class=\"image_400_400\" src=\"\" width=\"100\" height=\"100\" /> </div>  \n                                 <input type=\"hidden\" v-model=\"image_400_400\" />    \n                                 <input type=\"file\" id=\"image_400_400\"   class=\"image btn btn-info\">\n                                 </div>\n                                <h4> 600x600</h4>\n                                 <div>\n                                  <div> <img class=\"image_600_600\" src=\"\" width=\"100\" height=\"100\" /> </div>        \n                                  <input type=\"hidden\" v-model=\"image_600_600\" />    \n                                 <input type=\"file\" id=\"image_600_600\"  class=\"image btn btn-info\">\n                                 </div>\n                                </form>\n                            </div>\n                      </div>\n\n                    \n        </div>  \n        <div class=\"row\"> \n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-secondary\" @click=\"$router.back();\">Back</button>\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"($route.params.id>0)?update():store()\">Save</button>\n            </div>  \n        </div>    \n    </div> \n</template>\n \n\n<script>\n\nimport axios from 'axios';\n    export default { \n       data(){\n          return {\n               title:'Add Category',\n               height:100,\n               width:100,\n               categories:[],\n               image_100_100:'1',\n               image_400_400:'2',\n               image_600_600:'3',\n               data:{},\n               rows:[],\n               columns:[]\n            }\n        },            \n       async created() {//run before template\n              const res=await this.callApi(\"get\",\"posts?get_data=true\",{\n                     data:this.data\n                 });\n                this.data=res.data.result.rows;\n              if(this.$route.params.id>0){\n               this.edit(); \n              }\n        },\n        async mounted() {\n             \n                var $modal = $('#modal');\n                var image = document.getElementById('image');\n                var cropper;\n                var img; \n                \n                $(\".image\").change(function(e){\n                img=$(this).attr(\"id\");\n                if(img==\"image_400_400\"){\n                    this.width=400;\n                    this.height=400;\n                }else{\n                    this.width=100;\n                    this.height=100;\n                }\n                \n                var files = e.target.files;\n                var done = function (url) {\n                image.src = url;\n                $modal.modal('show');\n                };\n                var reader;\n                var file;\n                var url;\n                \n                if (files && files.length > 0) {\n                file = files[0];\n                if (URL) {\n                done(URL.createObjectURL(file));\n                }else if (FileReader) {\n                reader = new FileReader();\n                reader.onload = function (e) {\n                done(reader.result);\n                };\n                reader.readAsDataURL(file);\n                }\n                }\n                });\n                $modal.on('shown.bs.modal', function () {\n                cropper = new Cropper(image, {\n                width:this.width,\n                height:this.height,        \n                cropBoxResizable:true,    \n                aspectRatio: 1,\n                preview: '.preview'\n                });\n                }).on('hidden.bs.modal', function () {\n                cropper.destroy();\n                cropper = null;\n                });\n\n                $(\"#crop\").click(function(){               \n                var canvas = cropper.getCroppedCanvas({\n                        width: this.width,\n                        height: this.height,\n                    }  );\n                canvas.toBlob(function(blob) {\n                var url = URL.createObjectURL(blob);\n                var reader = new FileReader();\n                reader.readAsDataURL(blob); \n                 const res= reader.onloadend = function() {\n                    this.image_100_100=reader.result;\n                    $('img.'+img).attr(\"src\",reader.result) ;   \n\n                     /*const res= axios({\n                        method:'post',\n                        url:'http://'+window.location.hostname+':'+window.location.port+'/posts/upload',\n                        data:{'_token': $('meta[name=\"_token\"]').attr('content'),\n                        'image': base64data\n                        }\n                      }).then(function(res){\n                              $('img.'+img).attr(\"src\",res.data.src) ;   \n                              $modal.modal('hide');\n                      });\n                */\n                  }\n                }); \n                })       \n             \n        },\n        methods:{\n            async store(){\n                 const res=await this.callApi(\"POST\",\"posts\",{\n                     data:this.data\n                 });\n              // this.$router.go(-1);\n              this.$router.back();\n            }, \n             async edit(){\n                 const res=await this.callApi(\"GET\",\"posts/\"+this.$route.params.id,{});\n                 this.data=res.data;\n            },  \n             async update(){\n                                     alert(this.image_100_100);\n\n                 const res=await this.callApi(\"patch\",\"posts/\"+this.$route.params.id,{\n                    ...this.data\n                 });\n               \n                if(res.data.status==true){\n               alert(res.data.msg) ;\n               this.$router.go(-1);\n              }else{\n                  alert('failed');\n              }\n\n\n            }\n           \n        }\n        \n    }\n</script>\n<style scoped>\n.preview {\n  overflow: hidden;\n  width: 200px; \n  height: 200px;\n}\n</style>"]}]}